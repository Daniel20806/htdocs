<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>菜單</title>
  <link rel="stylesheet" href="menu.css">
  <link rel="stylesheet" href="../SA_order_system/order.css">
</head>

<body>
  <div id="menu-container" class="menu-container">

  </div>

  <button class="btn-add">新增</button>
  <script src="menu.js"></script>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      fetch('get_menu.php')
        .then(response => response.json()) // 將 response 轉換為 JSON 格式
        .then(data => {
          const menu = data.menu; // 從 JSON 資料中獲取 menu
          menu.forEach(item => {
            const menuContainer = document.getElementById('menu-container');
            const menuItem = document.createElement('div');
            menuItem.classList.add('menu-item');
            //圖片
            const img = document.createElement('img');
            img.src = 'logo.png';
            img.alt = '菜品圖片';
            menuItem.appendChild(img);

            // 創建並添加菜品資訊
            const itemDetails = document.createElement('div');
            itemDetails.classList.add('item-details');
            menuItem.appendChild(itemDetails);

            // 添加菜品分類
            const title = document.createElement('h4');
            switch (item.category) {
              case 'drink':
                title.textContent = '飲料';
                break;
              case 'snack':
                title.textContent = '點心';
                break;
              case 'toast':
                title.textContent = '吐司';
                break;
              case 'set_meal':
                title.textContent = '套餐';
                break;
              case 'burger':
                title.textContent = '漢堡';
                break;
            }
            itemDetails.appendChild(title);


            // 添加菜品名稱
            const name = document.createElement('h3');
            name.textContent = `${item.name}`;
            itemDetails.appendChild(name);

            // 添加價格
            const priceTag = document.createElement('p');
            priceTag.textContent = `NT$${item.price}`;
            itemDetails.appendChild(priceTag);

            // 創建並添加按鈕容器
            const itemActions = document.createElement('div');
            itemActions.classList.add('item-actions');
            menuItem.appendChild(itemActions);

            // 添加修改按鈕
            const editButton = document.createElement('button');
            editButton.classList.add('btn-edit');
            editButton.textContent = '修改';
            editButton.addEventListener('click', function () {
              window.location.href = 'change.html';
            });
            itemActions.appendChild(editButton);

            // 添加刪除按鈕
            const deleteButton = document.createElement('button');
            deleteButton.classList.add('btn-delete');
            deleteButton.textContent = '刪除';
            deleteButton.addEventListener('click', function () {
              const confirmed = confirm('確定要刪除這個菜品嗎？');
              if (confirmed) {
                menuItem.remove(); // 刪除該項目
              }
            });
            itemActions.appendChild(deleteButton);

            // 將菜單項目添加到菜單容器中
            menuContainer.appendChild(menuItem);
          });
        })
        .catch(error => console.error('Error fetching menu:', error));
    });
  </script>
</body>

</html>